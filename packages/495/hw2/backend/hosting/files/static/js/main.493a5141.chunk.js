(this["webpackJsonpweb-js"]=this["webpackJsonpweb-js"]||[]).push([[0],{110:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(13),o=n.n(c),i=(n(110),n(5)),s=n.n(i),u=n(10),l=n(169),d=n(170),f=n(161),b=n(50),j=n(8),p=n(14),m=n(39),h=n(155),O=n(158),v=n(171),x=n(160),g=n(157),w=n(94),k=n.n(w),y=n(95),T=n.n(y),C=n(29),D=n(4);function I(e){return new m.a({id:e,baseUrl:C.c})}var A=a.a.createContext(null);function S(e){var t=e.appId,n=e.children,r=a.a.useState(I(t)),c=Object(p.a)(r,2),o=c[0],i=c[1];a.a.useEffect((function(){i(I(t))}),[t]);var l=a.a.useState(o.currentUser),d=Object(p.a)(l,2),f=d[0],b=d[1],m=a.a.useCallback(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.logIn(t);case 2:b(o.currentUser);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o]),h=a.a.useCallback(Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===f||void 0===f?void 0:f.logOut();case 2:return e.next=4,o.removeUser(f);case 4:b(o.currentUser);case 5:case"end":return e.stop()}}),e)}))),[o,f]),O=a.a.useMemo((function(){return Object(j.a)(Object(j.a)({},o),{},{currentUser:f,logIn:m,logOut:h})}),[o,f,m,h]);return Object(D.jsx)(A.Provider,{value:O,children:n})}function E(){var e=a.a.useContext(A);if(!e)throw new Error("No Realm App found. Make sure to call useRealmApp() inside of a <RealmAppProvider />.");return e}var U=n(88),_=n.n(U),R=n(156),M="MQL";function N(){return Object(D.jsxs)(b.a,{className:"app-bar-title",component:"h1",variant:"h5",children:["My ",M," App"]})}function L(){return Object(D.jsxs)(D.Fragment,{children:[null,Object(D.jsx)(B,{})]})}function P(e){var t=e.children;return Object(D.jsx)(h.a,{style:{textAlign:"center",padding:"14px 0",marginTop:"auto"},children:t})}function B(){return Object(D.jsxs)(P,{children:[Object(D.jsxs)("span",{children:["Built with the MongoDB Realm ",M," Template"]})," |"," ",Object(D.jsx)(R.a,{target:"_blank",href:"https://docs.mongodb.com/realm",children:"Docs"})]})}!function(e,t){var n=new URL(e).pathname,r=_.a.join(n,t);new URL(r,e).href}(C.b,"/graphql/explore");var F=n(19),z=function(e){return!e},q=function(e,t){return!(t<0||t>=e.length)};var J=function(e,t){var n=e.findIndex((function(e){return n=e,r=t,String(null===n||void 0===n?void 0:n._id)===String(null===r||void 0===r?void 0:r._id);var n,r}));return n>=0?n:null},W=n(172);function K(e){return Object(D.jsx)(W.a,Object(j.a)({elevation:6,variant:"filled"},e))}function Q(e){var t=e.isOpen,n=e.message,r=e.onClose,a=void 0===r?function(){}:r;return t?Object(D.jsx)(K,{onClose:a,severity:"error",children:n}):null}function Y(){var e,t,n=E(),r=a.a.useState(!1),c=Object(p.a)(r,2),o=c[0],i=c[1],l={email:null,password:null,other:null},d=a.a.useState(l),w=Object(p.a)(d,2),y=w[0],C=w[1],I=function(){return C(l)},A=function(e){var t=e.error,n=e.clearError,r=e.hideAfterMs,c=a.a.useState(!1),o=Object(p.a)(c,2),i=o[0],s=o[1],u=a.a.useCallback((function(){n(),s(!1)}),[n]);return a.a.useEffect((function(){if(t){if(s(!0),r){var e=setTimeout((function(){u()}),r);return function(){clearTimeout(e)}}}else s(!1)}),[t,u,r]),function(){return Object(D.jsx)(Q,{isOpen:i,message:t,onClose:function(){u()}})}}({error:y.other,clearError:function(){C((function(e){return Object(j.a)(Object(j.a)({},e),{},{other:null})}))}}),S=a.a.useState(!1),U=Object(p.a)(S,2),_=U[0],R=U[1],M=function(){var e=Object(u.a)(s.a.mark((function e(t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.email,a=t.password,I(),e.prev=2,!o){e.next=6;break}return e.next=6,n.emailPasswordAuth.registerUser(r,a);case 6:return e.next=8,n.logIn(m.c.emailPassword(r,a));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),$(e.t0,C);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)(h.a,{maxWidth:"sm",className:"main-container",children:[Object(D.jsx)(O.a,{className:"auth-card",variant:"outlined",children:Object(D.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.target),n=Object.fromEntries(t.entries()),r=n.email,a=n.password;M({email:r,password:a})},children:[Object(D.jsx)(b.a,{component:"h2",variant:"h4",gutterBottom:!0,children:o?"Sign Up":"Log In"}),Object(D.jsx)(A,{}),Object(D.jsx)(v.a,{id:"input-email",name:"email",label:"Email Address",variant:"outlined",error:Boolean(y.email),helperText:null!==(e=y.email)&&void 0!==e?e:""}),Object(D.jsx)(v.a,{id:"input-password",type:_?"text":"password",name:"password",label:"Password",variant:"outlined",error:Boolean(y.password),helperText:null!==(t=y.password)&&void 0!==t?t:"",InputProps:{endAdornment:Object(D.jsx)(x.a,{position:"end",children:Object(D.jsx)(g.a,{"aria-label":"toggle password visibility",onClick:function(){return R(z)},onMouseDown:function(e){e.preventDefault()},children:_?Object(D.jsx)(k.a,{}):Object(D.jsx)(T.a,{})})})}}),Object(D.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",children:o?"Create Account":"Log In"}),Object(D.jsx)("button",{type:"button",className:"link-button",onClick:function(){return I(),void i(z)},children:o?"Already have an account? Log In":"Sign up for an account"})]})}),Object(D.jsx)(B,{})]})}function $(e,t){var n=function(){t((function(e){return Object(j.a)(Object(j.a)({},e),{},{other:"Something went wrong. Try again in a little bit."})})),console.warn("Something went wrong with a Realm login or signup request. See the following error for details."),console.error(e)};if(e instanceof m.d){var r=e.error,a=e.statusCode;switch(r||a){case"invalid username":t((function(e){return Object(j.a)(Object(j.a)({},e),{},{email:"Invalid email address."})}));break;case"invalid username/password":case"invalid password":case 401:t((function(e){return Object(j.a)(Object(j.a)({},e),{},{password:"Incorrect password."})}));break;case"name already in use":case 409:t((function(e){return Object(j.a)(Object(j.a)({},e),{},{email:"Email is already registered."})}));break;case"password must be between 6 and 128 characters":case 400:t((function(e){return Object(j.a)(Object(j.a)({},e),{},{password:"Password must be between 6 and 128 characters."})}));break;default:n()}}else n()}var G=n(49),H=n(166),V=n(159),X=n(96),Z=n.n(X),ee=n(63),te=function(){},ne={onInsert:te,onUpdate:te,onReplace:te,onDelete:te};function re(){var e=E(),t=a.a.useState([]),n=Object(p.a)(t,2),r=n[0],c=n[1],o=a.a.useState(!0),i=Object(p.a)(o,2),l=i[0],d=i[1],f=function(e){var t=e.cluster,n=void 0===t?"mongodb-atlas":t,r=e.db,c=e.collection,o=E();return a.a.useMemo((function(){return o.currentUser.mongoClient(n).db(r).collection(c)}),[o.currentUser,n,r,c])}({cluster:C.d,db:"todo",collection:"Task"});return a.a.useEffect((function(){f.find({}).then((function(e){c(e),d(!1)}))}),[f]),function(e,t){var n=a.a.useMemo((function(){return{}}),[]),r=Object(j.a)(Object(j.a)({},ne),t),c=a.a.useRef(r);a.a.useEffect((function(){c.current={onInsert:r.onInsert,onUpdate:r.onUpdate,onReplace:r.onReplace,onDelete:r.onDelete}}),[r.onInsert,r.onUpdate,r.onReplace,r.onDelete]),a.a.useEffect((function(){!function(){var t=Object(u.a)(s.a.mark((function t(){var r,a,o,i,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,a=!1,t.prev=2,i=Object(ee.a)(e.watch({filter:n}));case 4:return t.next=6,i.next();case 6:return u=t.sent,r=u.done,t.next=10,u.value;case 10:if(l=t.sent,r){t.next=28;break}d=l,t.t0=d.operationType,t.next="insert"===t.t0?16:"update"===t.t0?18:"replace"===t.t0?20:"delete"===t.t0?22:24;break;case 16:return c.current.onInsert(d),t.abrupt("break",25);case 18:return c.current.onUpdate(d),t.abrupt("break",25);case 20:return c.current.onReplace(d),t.abrupt("break",25);case 22:return c.current.onDelete(d),t.abrupt("break",25);case 24:throw new Error("Invalid change operation type: ".concat(d.operationType));case 25:r=!0,t.next=4;break;case 28:t.next=34;break;case 30:t.prev=30,t.t1=t.catch(2),a=!0,o=t.t1;case 34:if(t.prev=34,t.prev=35,r||null==i.return){t.next=39;break}return t.next=39,i.return();case 39:if(t.prev=39,!a){t.next=42;break}throw o;case 42:return t.finish(39);case 43:return t.finish(34);case 44:case"end":return t.stop()}}),t,null,[[2,30,34,44],[35,,39,43]])})));return function(){return t.apply(this,arguments)}}()()}),[e,n])}(f,{onInsert:function(e){c((function(t){var n;if(l)return t;var r=null!==(n=J(t,e.fullDocument))&&void 0!==n?n:t.length;return r===t.length?function(e,t,n){if(!q(e,t)&&t!==e.length)throw new Error("Cannot add value. Array index out of bounds.");return[].concat(Object(F.a)(e.slice(0,t)),[n],Object(F.a)(e.slice(t)))}(t,r,e.fullDocument):t}))},onUpdate:function(e){c((function(t){return l?t:function(e,t,n){if(!q(e,t))throw new Error("Cannot update value. Array index out of bounds.");return[].concat(Object(F.a)(e.slice(0,t)),[n(e[t])],Object(F.a)(e.slice(t+1)))}(t,J(t,e.fullDocument),(function(){return e.fullDocument}))}))},onReplace:function(e){c((function(t){return l?t:function(e,t,n){if(!q(e,t))throw new Error("Cannot replace value. Array index out of bounds.");return[].concat(Object(F.a)(e.slice(0,t)),[n],Object(F.a)(e.slice(t+1)))}(t,J(t,e.fullDocument),e.fullDocument)}))},onDelete:function(e){c((function(t){if(l)return t;var n=J(t,{_id:e.documentKey._id});return n>=0?function(e,t){if(!q(e,t))throw new Error("Cannot remove value. Array index out of bounds.");return[].concat(Object(F.a)(e.slice(0,t)),Object(F.a)(e.slice(t+1)))}(t,n):t}))}}),{loading:l,todos:r,saveTodo:function(){var t=Object(u.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.summary){t.next=11;break}return n._partition=e.currentUser.id,t.prev=2,t.next=5,f.insertOne(n);case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(2),t.t0.error.match(/^Duplicate key error/)&&console.warn("The following error means that we tried to insert a todo multiple times (i.e. an existing todo has the same _id). In this app we just catch the error and move on. In your app, you might want to debounce the save input or implement an additional loading state to avoid sending the request in the first place."),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),toggleTodo:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.updateOne({_id:t._id},{$set:{isComplete:!t.isComplete}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteTodo:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.deleteOne({_id:t._id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}var ae=n(162),ce=n(163),oe=n(173),ie=n(164),se=n(165),ue=n(69),le=n.n(ue);function de(e){var t=e.todo,n=e.todoActions;return Object(D.jsxs)(ae.a,{children:[Object(D.jsx)(ce.a,{children:Object(D.jsx)(oe.a,{edge:"start",color:"primary",checked:t.isComplete,onClick:function(){n.toggleTodo(t)}})}),Object(D.jsx)(ie.a,{children:t.summary}),Object(D.jsx)(se.a,{children:Object(D.jsx)(g.a,{edge:"end",size:"small",onClick:function(){n.deleteTodo(t)},children:Object(D.jsx)(le.a,{})})})]})}var fe=n(6),be=Object(fe.a)({secondaryAction:{paddingRight:"120px"}})(ae.a);function je(e){var t=e.todo,n=e.todoActions,r=e.draftTodoActions;return Object(D.jsxs)(be,{children:[Object(D.jsx)(ie.a,{inset:!0,children:Object(D.jsx)(v.a,{style:{width:"100%"},placeholder:"What needs doing?",size:"small",value:t.summary,onChange:function(e){r.setDraftTodoSummary(t,e.target.value)}})}),Object(D.jsxs)(se.a,{children:[Object(D.jsx)(f.a,{variant:"outlined",size:"small",onClick:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.saveTodo(t);case 2:r.deleteDraftTodo(t);case 3:case"end":return e.stop()}}),e)}))),children:"Save"}),Object(D.jsx)(g.a,{edge:"end",size:"small",onClick:function(){r.deleteDraftTodo(t)},children:Object(D.jsx)(le.a,{})})]})]})}function pe(e,t){var n,r,c=a.a.useState(!1),o=Object(p.a)(c,2),i=o[0],s=o[1];return n=function(){e&&s(!0)},r=[t],a.a.useEffect((function(){var e=setTimeout((function(){n()}),r);return function(){return clearTimeout(e)}}),[n,r]),a.a.useEffect((function(){e||s(!1)}),[e]),i}function me(){var e=re(),t=e.loading,n=e.todos,r=Object(G.a)(e,["loading","todos"]),c=function(){var e=a.a.useState([]),t=Object(p.a)(e,2),n=t[0],r=t[1];return{draftTodos:n,createDraftTodo:function(){var e={_id:new m.b.ObjectID,summary:"",isComplete:!1};r((function(t){return[].concat(Object(F.a)(t),[e])}))},setDraftTodoSummary:function(e,t){r((function(n){var r=n.findIndex((function(t){return t._id===e._id}));return[].concat(Object(F.a)(n.slice(0,r)),[Object(j.a)(Object(j.a)({},n[r]),{},{summary:t})],Object(F.a)(n.slice(r+1)))}))},deleteDraftTodo:function(e){r((function(t){var n=t.findIndex((function(t){return t._id===e._id}));return[].concat(Object(F.a)(t.slice(0,n)),Object(F.a)(t.slice(n+1)))}))}}}(),o=c.draftTodos,i=Object(G.a)(c,["draftTodos"]),s=pe(t,200);return Object(D.jsxs)(h.a,{className:"main-container",maxWidth:"sm",children:[t?s?Object(D.jsx)(H.a,{}):null:Object(D.jsxs)("div",{className:"todo-items-container",children:[Object(D.jsx)(b.a,{component:"p",variant:"h5",children:"You have ".concat(n.length," To-Do Item").concat(1===n.length?"":"s")}),Object(D.jsx)(f.a,{variant:"contained",color:"primary",startIcon:Object(D.jsx)(Z.a,{}),onClick:function(){return i.createDraftTodo()},children:"Add To-Do"}),Object(D.jsxs)(V.a,{style:{width:"100%"},children:[n.map((function(e){return Object(D.jsx)(de,{todo:e,todoActions:r},String(e._id))})),o.map((function(e){return Object(D.jsx)(je,{todo:e,todoActions:r,draftTodoActions:i},String(e._id))}))]})]}),Object(D.jsx)(L,{})]})}var he=n(97),Oe=n(168),ve=n(73),xe=n(167),ge=n(72),we=n(71),ke={green:Object(j.a)(Object(j.a)({},ve.a),{},{500:"#09804C",A400:"#B9EACD"}),purple:Object(j.a)(Object(j.a)({},xe.a),{},{500:"#6200EE",A400:"#9795F9"}),orange:ge.a,red:we.a},ye={palette:{primary:ke.green,secondary:ke.green}},Te=Object(he.a)(ye);function Ce(e){var t=e.children;return Object(D.jsx)(Oe.a,{theme:Te,children:t})}n(123);function De(){return Object(D.jsx)(Ce,{children:Object(D.jsx)(S,{appId:C.a,children:Object(D.jsx)(Ie,{})})})}function Ie(){var e=E(),t=e.currentUser,n=e.logOut;return Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)(l.a,{position:"sticky",children:Object(D.jsxs)(d.a,{children:[Object(D.jsx)(N,{}),t?Object(D.jsx)(f.a,{variant:"contained",color:"secondary",onClick:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)}))),children:Object(D.jsx)(b.a,{variant:"button",children:"Log Out"})}):null]})}),t?Object(D.jsx)(me,{}):Object(D.jsx)(Y,{})]})}var Ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,174)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(D.jsx)(a.a.StrictMode,{children:Object(D.jsx)(De,{})}),document.getElementById("root")),Ae()},29:function(e){e.exports=JSON.parse('{"a":"awesomeapp-acjwu","b":"https://realm.mongodb.com/groups/6282972c9a61105b55b5b892/apps/628297a8133c8f9c338eeab1","c":"https://realm.mongodb.com","d":"mongodb-atlas"}')}},[[124,1,2]]]);
//# sourceMappingURL=main.493a5141.chunk.js.map