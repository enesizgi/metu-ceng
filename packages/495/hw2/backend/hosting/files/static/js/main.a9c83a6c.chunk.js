(this["webpackJsonpweb-js"]=this["webpackJsonpweb-js"]||[]).push([[0],{119:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(16),i=n.n(c),o=(n(119),n(3)),s=n.n(o),l=n(9),u=n(6),d=n(191),j=n(192),b=n(185),v=n(135),f=n(7),h=n(48),p=n(180),O=n(181),m=n(196),x=n(184),g=n(179),k=n(100),y=n.n(k),w=n(101),C=n.n(w),B=n(32),U=n(1);function A(e){return new h.a({id:e,baseUrl:B.b})}var I=a.a.createContext(null);function S(e){var t=e.appId,n=e.children,r=a.a.useState(A(t)),c=Object(u.a)(r,2),i=c[0],o=c[1];a.a.useEffect((function(){o(A(t))}),[t]);var d=a.a.useState(i.currentUser),j=Object(u.a)(d,2),b=j[0],v=j[1],h=a.a.useCallback(function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.logIn(t);case 2:v(i.currentUser);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),p=a.a.useCallback(Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===b||void 0===b?void 0:b.logOut();case 2:return e.next=4,i.removeUser(b);case 4:v(i.currentUser);case 5:case"end":return e.stop()}}),e)}))),[i,b]),O=a.a.useCallback((function(){var e=Object.values(i.allUsers).filter((function(e){return e.isLoggedIn}));i.switchUser(e.find((function(e){return"6283fd2ac3ac799e65415025"===e.id}))),v(i.currentUser)}),[i]),m=a.a.useCallback((function(e){var t=Object.values(i.allUsers).find((function(t){return t.id===e}));t&&(i.switchUser(t),v(i.currentUser))}),[i]),x=a.a.useCallback(function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.values(i.allUsers).find((function(e){return e.isLoggedIn})),e.next=3,n.logOut();case 3:return e.next=5,i.removeUser(n);case 5:return v(i.currentUser),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),g=a.a.useMemo((function(){return Object(f.a)(Object(f.a)({},i),{},{switchUser:m,currentUser:b,logIn:h,logOut:p,switchToAdmin:O,removeUser:x})}),[i,m,b,h,p,O,x]);return Object(U.jsx)(I.Provider,{value:g,children:n})}function F(){var e=a.a.useContext(I);if(!e)throw new Error("No Realm App found. Make sure to call useRealmApp() inside of a <RealmAppProvider />.");return e}var D=n(18),R=function(e){return!e},N=function(e,t){return!(t<0||t>=e.length)};function P(e,t,n){if(!N(e,t)&&t!==e.length)throw new Error("Cannot add value. Array index out of bounds.");return[].concat(Object(D.a)(e.slice(0,t)),[n],Object(D.a)(e.slice(t)))}function T(e,t,n){if(!N(e,t))throw new Error("Cannot replace value. Array index out of bounds.");return[].concat(Object(D.a)(e.slice(0,t)),[n],Object(D.a)(e.slice(t+1)))}function E(e,t,n){if(!N(e,t))throw new Error("Cannot update value. Array index out of bounds.");return[].concat(Object(D.a)(e.slice(0,t)),[n(e[t])],Object(D.a)(e.slice(t+1)))}function M(e,t){if(!N(e,t))throw new Error("Cannot remove value. Array index out of bounds.");return[].concat(Object(D.a)(e.slice(0,t)),Object(D.a)(e.slice(t+1)))}var _=function(e,t){var n=e.findIndex((function(e){return n=e,r=t,String(null===n||void 0===n?void 0:n._id)===String(null===r||void 0===r?void 0:r._id);var n,r}));return n>=0?n:null},G=n(195);function W(e){return Object(U.jsx)(G.a,Object(f.a)({elevation:6,variant:"filled"},e))}function L(e){var t=e.isOpen,n=e.message,r=e.onClose,a=void 0===r?function(){}:r;return t?Object(U.jsx)(W,{onClose:a,severity:"error",children:n}):null}function H(e){var t,n,r=e.isAdminLogin,c=e.onRegisterHandler,i=F(),o=a.a.useState(!!r),d=Object(u.a)(o,2),j=d[0],k=d[1],w={email:null,password:null,other:null},B=a.a.useState(w),A=Object(u.a)(B,2),I=A[0],S=A[1],D=function(){return S(w)},N=function(e){var t=e.error,n=e.clearError,r=e.hideAfterMs,c=a.a.useState(!1),i=Object(u.a)(c,2),o=i[0],s=i[1],l=a.a.useCallback((function(){n(),s(!1)}),[n]);return a.a.useEffect((function(){if(t){if(s(!0),r){var e=setTimeout((function(){l()}),r);return function(){clearTimeout(e)}}}else s(!1)}),[t,l,r]),function(){return Object(U.jsx)(L,{isOpen:o,message:t,onClose:function(){l()}})}}({error:I.other,clearError:function(){S((function(e){return Object(f.a)(Object(f.a)({},e),{},{other:null})}))}}),P=a.a.useState(!1),T=Object(u.a)(P,2),E=T[0],M=T[1],_=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,a=t.password,D(),e.prev=2,!j){e.next=6;break}return e.next=6,i.emailPasswordAuth.registerUser(n,a);case 6:if(r){e.next=11;break}return e.next=9,i.logIn(h.b.emailPassword(n,a));case 9:e.next=17;break;case 11:return o=h.b.emailPassword(n,a),e.next=14,i.logIn(o);case 14:i.removeUser(o),i.switchToAdmin(),c();case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),console.log("error"),Y(e.t0,S);case 23:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsx)(p.a,{className:"main-container",children:Object(U.jsx)(O.a,{className:"auth-card",variant:"outlined",children:Object(U.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.target),n=Object.fromEntries(t.entries()),r=n.email,a=n.password;_({email:r,password:a})},children:[Object(U.jsx)(v.a,{component:"h2",variant:"h4",gutterBottom:!0,children:j?"Sign Up":"Log In"}),Object(U.jsx)(N,{}),Object(U.jsx)(m.a,{id:"input-email",name:"email",label:"Email Address",variant:"outlined",error:Boolean(I.email),helperText:null!==(t=I.email)&&void 0!==t?t:""}),Object(U.jsx)(m.a,{id:"input-password",type:E?"text":"password",name:"password",label:"Password",variant:"outlined",error:Boolean(I.password),helperText:null!==(n=I.password)&&void 0!==n?n:"",InputProps:{endAdornment:Object(U.jsx)(x.a,{position:"end",children:Object(U.jsx)(g.a,{"aria-label":"toggle password visibility",onClick:function(){return M(R)},onMouseDown:function(e){e.preventDefault()},children:E?Object(U.jsx)(y.a,{}):Object(U.jsx)(C.a,{})})})}}),Object(U.jsx)(b.a,{type:"submit",variant:"contained",color:"primary",children:j?"Create Account":"Log In"}),Object(U.jsxs)("button",{type:"button",className:"link-button",onClick:function(){return D(),void k(R)},children:[j&&!r&&"Already have an account? Log In",!j&&!r&&"Sign up for an account"]})]})})})}function Y(e,t){var n=function(){t((function(e){return Object(f.a)(Object(f.a)({},e),{},{other:"Something went wrong. Try again in a little bit."})})),console.warn("Something went wrong with a Realm login or signup request. See the following error for details."),console.error(e)};if(e instanceof h.c){var r=e.error,a=e.statusCode;switch(r||a){case"invalid username":t((function(e){return Object(f.a)(Object(f.a)({},e),{},{email:"Invalid email address."})}));break;case"invalid username/password":case"invalid password":case 401:t((function(e){return Object(f.a)(Object(f.a)({},e),{},{password:"Incorrect password."})}));break;case"name already in use":case 409:t((function(e){return Object(f.a)(Object(f.a)({},e),{},{email:"Email is already registered."})}));break;case"password must be between 6 and 128 characters":case 400:t((function(e){return Object(f.a)(Object(f.a)({},e),{},{password:"Password must be between 6 and 128 characters."})}));break;default:n()}}else n()}var z=n(26),J=n(186),$=n(39),q=n.n($),K=n(76),Q=n.n(K),V=function(e){var t,n=e.user,r=e.userActions;return Object(U.jsxs)("div",{children:[Object(U.jsx)(g.a,{edge:"end",size:"small",onClick:function(){"admin"!==n.username&&r.deleteUser(n)},children:Object(U.jsx)(Q.a,{})}),Object(U.jsxs)("p",{children:["Username: ",null===n||void 0===n?void 0:n.username]}),Object(U.jsxs)("p",{children:["Email: ",null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.email]})]})};function X(e){var t=e.cluster,n=void 0===t?"mongodb-atlas":t,r=e.db,c=e.collection,i=F();return a.a.useMemo((function(){return i.currentUser.mongoClient(n).db(r).collection(c)}),[i.currentUser,n,r,c])}var Z=n(69),ee=function(){},te={onInsert:ee,onUpdate:ee,onReplace:ee,onDelete:ee};function ne(e,t){var n=a.a.useMemo((function(){return{}}),[]),r=Object(f.a)(Object(f.a)({},te),t),c=a.a.useRef(r);a.a.useEffect((function(){c.current={onInsert:r.onInsert,onUpdate:r.onUpdate,onReplace:r.onReplace,onDelete:r.onDelete}}),[r.onInsert,r.onUpdate,r.onReplace,r.onDelete]),a.a.useEffect((function(){(function(){var t=Object(l.a)(s.a.mark((function t(){var r,a,i,o,l,u,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,a=!1,t.prev=2,o=Object(Z.a)(e.watch({filter:n}));case 4:return t.next=6,o.next();case 6:return l=t.sent,r=l.done,t.next=10,l.value;case 10:if(u=t.sent,r){t.next=28;break}d=u,t.t0=d.operationType,t.next="insert"===t.t0?16:"update"===t.t0?18:"replace"===t.t0?20:"delete"===t.t0?22:24;break;case 16:return c.current.onInsert(d),t.abrupt("break",25);case 18:return c.current.onUpdate(d),t.abrupt("break",25);case 20:return c.current.onReplace(d),t.abrupt("break",25);case 22:return c.current.onDelete(d),t.abrupt("break",25);case 24:throw new Error("Invalid change operation type: ".concat(d.operationType));case 25:r=!0,t.next=4;break;case 28:t.next=34;break;case 30:t.prev=30,t.t1=t.catch(2),a=!0,i=t.t1;case 34:if(t.prev=34,t.prev=35,r||null==o.return){t.next=39;break}return t.next=39,o.return();case 39:if(t.prev=39,!a){t.next=42;break}throw i;case 42:return t.finish(39);case 43:return t.finish(34);case 44:case"end":return t.stop()}}),t,null,[[2,30,34,44],[35,,39,43]])})));return function(){return t.apply(this,arguments)}})()()}),[e,n])}var re=function(e){var t=F(),n=a.a.useState([]),c=Object(u.a)(n,2),i=c[0],o=c[1],d=a.a.useState(!0),j=Object(u.a)(d,2),b=j[0],v=j[1],f=a.a.useState(0),h=Object(u.a)(f,2),p=h[0],O=h[1],m=X({cluster:B.c,db:"data",collection:"users"});Object(r.useEffect)((function(){m.count().then((function(e){return O(e)})),t.currentUser.callFunction("getDocumentsWithLimit",{limit:3,skip:3*(e-1),collection:"users"}).then((function(e){o(e),v(!1)}))}),[m,e,t.currentUser]),ne(m,{onInsert:function(e){o((function(t){var n;if(b)return t;var r=null!==(n=_(t,e.fullDocument))&&void 0!==n?n:t.length;return r===t.length?P(t,r,e.fullDocument):t}))},onUpdate:function(e){o((function(t){return b?t:E(t,_(t,e.fullDocument),(function(){return e.fullDocument}))}))},onReplace:function(e){o((function(t){return b?t:T(t,_(t,e.fullDocument),e.fullDocument)}))},onDelete:function(e){o((function(t){if(b)return t;var n=_(t,{_id:e.documentKey._id});return n>=0?M(t,n):t}))}});var x=function(){var e=Object(l.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._partition=t.currentUser.id,e.prev=1,e.next=4,m.insertOne(n);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.error.match(/^Duplicate key error/)&&console.warn("The following error means that we tried to insert a todo multiple times (i.e. an existing todo has the same _id). In this app we just catch the error and move on. In your app, you might want to debounce the save input or implement an additional loading state to avoid sending the request in the first place."),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.updateOne({userID:t},{$set:n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}();return{loading:b,users:i,totalUsers:p,saveUser:x,deleteUser:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.deleteOne({_id:t._id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUser:g}};function ae(e,t){var n,r,c=a.a.useState(!1),i=Object(u.a)(c,2),o=i[0],s=i[1];return n=function(){e&&s(!0)},r=[t],a.a.useEffect((function(){var e=setTimeout((function(){n()}),r);return function(){return clearTimeout(e)}}),[n,r]),a.a.useEffect((function(){e||s(!1)}),[e]),o}var ce=function(e){var t=e.handleBackButtonClick,n=e.isAddUserClicked,r=e.setIsAddUserClicked,c=a.a.useState(1),i=Object(u.a)(c,2),o=i[0],s=i[1],l=re(o),d=l.loading,j=l.users,v=l.totalUsers,f=Object(z.a)(l,["loading","users","totalUsers"]),h=ae(d,200),m={margin:"10px"};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:function(){t(),r(!1)},style:{margin:"10px"},children:"Go Back"}),!n&&Object(U.jsx)(p.a,{className:"main-container",maxWidth:!1,style:{padding:0,margin:0},children:d&&h?Object(U.jsx)(J.a,{}):Object(U.jsxs)("div",{style:{display:"block",width:"100%",maxWidth:"100%"},children:[Object(U.jsxs)("div",{className:"title-container",children:[Object(U.jsx)("h2",{children:"You have ".concat(v," user").concat(1===v?"":"s")}),Object(U.jsx)(b.a,{variant:"contained",color:"primary",startIcon:Object(U.jsx)(q.a,{}),onClick:function(){r(!0)},children:"Add User"}),Object(U.jsxs)("div",{style:m,children:[Object(U.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return s((function(e){return Math.max(e-1,1)}))},style:m,children:"Previous Page"}),Object(U.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return s((function(e){return Math.min(e+1,Math.ceil(v/3))}))},style:m,children:"Next Page"})]})]}),Object(U.jsx)("div",{className:"main-container",children:j.map((function(e){return Object(U.jsx)(O.a,{style:{minWidth:"25%",padding:"16px",margin:"16px"},children:Object(U.jsx)(V,{user:e,userActions:f},JSON.stringify(e))})}))})]})}),n&&Object(U.jsx)(H,{isAdminLogin:!0,onRegisterHandler:function(){r(!1)}})]})},ie=n(11),oe=n(102),se=n.n(oe),le=function(e,t,n){var c=F(),i=a.a.useState([]),o=Object(u.a)(i,2),d=o[0],j=o[1],b=a.a.useState(!0),v=Object(u.a)(b,2),f=v[0],h=v[1],p=a.a.useState(0),O=Object(u.a)(p,2),m=O[0],x=O[1],g=a.a.useState(0),k=Object(u.a)(g,2),y=k[0],w=k[1],C=a.a.useState([]),U=Object(u.a)(C,2),A=U[0],I=U[1],S=a.a.useState([]),D=Object(u.a)(S,2),R=D[0],N=D[1],G=X({cluster:B.c,db:"data",collection:"books"}),W=Object(r.useCallback)((function(){G.find(Object(ie.a)({},"ratings.".concat(c.currentUser.id),{$exists:!0})).then((function(e){return I(e)}))}),[G,c.currentUser.id]),L=Object(r.useCallback)((function(){G.count({readings:c.currentUser.id}).then((function(e){return w(e)}))}),[G,c.currentUser.id]),H=Object(r.useCallback)((function(){G.count({favoritedBy:c.currentUser.id}).then((function(e){return x(e)}))}),[G,c.currentUser.id]),Y=Object(r.useCallback)((function(){"profile"===n&&(W(),L(),H(),c.currentUser.callFunction("getFavoriteBooksByUser",{limit:e||3,skip:(t-1)*(e||3)}).then((function(e){j(e),h(!1)})))}),[t,e,c,n,W,L,H]),z=Object(r.useCallback)((function(){"reviews"===n&&(G.find(Object(ie.a)({},"reviews.".concat(c.currentUser.id),{$exists:!0})).then((function(e){return N(e)})),c.currentUser.callFunction("getReviewsByUser",{limit:e||3,skip:(t-1)*(e||3)}).then((function(e){j(e),h(!1)})))}),[G,n,t,e,c.currentUser]);Object(r.useEffect)((function(){"profile"!==n?"reviews"!==n?(G.count().then((function(e){return x(e)})),c.currentUser.callFunction("getDocumentsWithLimit",{limit:e||3,skip:(t-1)*(e||3),collection:"books"}).then((function(e){j(e),h(!1)}))):z():Y()}),[G,e,t,c.currentUser,n,Y,z]),ne(G,{onInsert:function(e){j((function(t){var n;if(f)return t;var r=null!==(n=_(t,e.fullDocument))&&void 0!==n?n:t.length;return r===t.length?P(t,r,e.fullDocument):t}))},onUpdate:function(e){j((function(t){return f?t:E(t,_(t,e.fullDocument),(function(){return e.fullDocument}))}))},onReplace:function(e){j((function(t){return f?t:T(t,_(t,e.fullDocument),e.fullDocument)}))},onDelete:function(e){j((function(t){if(f)return t;var n=_(t,{_id:e.documentKey._id});return n>=0?M(t,n):t}))}});var J=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._partition=c.currentUser.id,e.prev=1,e.next=4,G.insertOne(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.error.match(/^Duplicate key error/)&&console.warn("The following error means that we tried to insert a todo multiple times (i.e. an existing todo has the same _id). In this app we just catch the error and move on. In your app, you might want to debounce the save input or implement an additional loading state to avoid sending the request in the first place."),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t,n),e.next=4,G.updateOne({_id:t},{$set:n});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.currentUser.callFunction("addBookToFavorite",{bookID:String(t._id),timestamp:se()().unix()});case 3:Y(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.currentUser.callFunction("removeBookFromFavorite",{bookID:String(t._id)});case 3:Y(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.currentUser.callFunction("rateABook",{bookID:String(n._id),rating:parseFloat(t)});case 3:L(),W(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();return{loading:f,books:d,totalBooks:m,saveBook:J,deleteBook:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.deleteOne({_id:t._id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateBook:$,addToFavoriteBook:q,removeFromFavoriteBook:K,rateABook:Q,numberOfReads:y,ratedBooks:A,reviewedBooks:R}},ue=n(198),de=n(194),je=n(199),be=n(193),ve=n(187),fe=n(188),he=function(e){var t,n,a,c=e.book,i=e.bookActions,o=e.isAdmin,s=e.userID,l=e.isAuthor,u=e.setIsReviewButtonClicked,d=e.setIsAddBookButtonClicked,j=e.isReviewDisabled,v=e.setTempBook,h=e.isRatingDisabled,p=e.showReview,O=e.showRating;"asdfasdf"===c.author&&console.log(c);var m=null===c||void 0===c||null===(t=c.favoritedBy)||void 0===t?void 0:t.includes(s),x=Object.values((null===c||void 0===c?void 0:c.ratings)||{}),k=x.length?x.reduce((function(e,t){return e+t}))/x.length:0,y=null===c||void 0===c||null===(n=c.reviews)||void 0===n?void 0:n[s],w=null===c||void 0===c||null===(a=c.ratings)||void 0===a?void 0:a[s],C=Object(r.useMemo)((function(){return Object.keys((null===c||void 0===c?void 0:c.reviews)||{}).includes(s)}),[c,s]);console.log("review",c);var B=null===c||void 0===c?void 0:c.isFiction;return Object(U.jsxs)("div",{children:[c.coverImageUrl&&Object(U.jsx)("img",{src:c.coverImageUrl,alt:"cover",style:{maxWidth:"40%",maxHeight:"40%"}}),o&&Object(U.jsx)(g.a,{edge:"end",size:"small",onClick:function(){i.deleteBook(c)},children:Object(U.jsx)(Q.a,{})}),!o&&Object(U.jsxs)(g.a,{edge:"end",size:"small",onClick:function(){m?i.removeFromFavoriteBook(c):i.addToFavoriteBook(c)},children:[m&&Object(U.jsx)(ve.a,{}),!m&&Object(U.jsx)(fe.a,{})]}),Object(U.jsxs)("p",{children:["Title: ",null===c||void 0===c?void 0:c.title]}),Object(U.jsxs)("p",{children:["Author: ",null===c||void 0===c?void 0:c.author]}),Object(U.jsxs)("p",{children:["Translator: ",null===c||void 0===c?void 0:c.translator]}),Object(U.jsxs)("p",{children:["Editor: ",null===c||void 0===c?void 0:c.editor]}),Object(U.jsxs)("p",{children:["Publisher: ",null===c||void 0===c?void 0:c.publisher]}),Object(U.jsxs)("p",{children:["Fiction or Non-fiction?: ",B?"Fiction":"Non-fiction"]}),B&&Object(U.jsxs)("p",{children:["Genre: ",null===c||void 0===c?void 0:c.Genre]}),Object(U.jsxs)("p",{children:["Year: ",null===c||void 0===c?void 0:c.year]}),Object(U.jsxs)("div",{style:{marginBottom:"16px"},children:["Rating:",Object(U.jsx)(be.a,{value:k,precision:.1,readOnly:!0})]}),!o&&!l&&!h&&Object(U.jsxs)("div",{children:["Click to rate:",Object(U.jsx)(be.a,{precision:.25,onChange:function(e){i.rateABook(e.target.value,c)}})]}),!l&&!o&&!j&&Object(U.jsx)(b.a,{variant:"contained",color:"primary",startIcon:!C&&Object(U.jsx)(q.a,{}),onClick:function(){u(!0),d(!1),v(Object(f.a)({},c))},style:{margin:"10px"},children:C?"Edit Review":"Add Review"}),p&&Object(U.jsxs)("div",{style:{width:"90%",wordWrap:"break-word",marginTop:"10px"},children:["Your Review: ",y]}),O&&w&&Object(U.jsxs)("div",{style:{width:"90%",wordWrap:"break-word",marginTop:"10px"},children:["Your Rating: ",w]})]})},pe=function(e){var t,n=e.handleBackButtonClick,r=e.isAddBookButtonClicked,c=e.setIsAddBookButtonClicked,i=e.isAdmin,o=F(),s=a.a.useState(1),l=Object(u.a)(s,2),d=l[0],j=l[1],v=le(0,d),h=v.loading,x=v.books,g=v.totalBooks,k=Object(z.a)(v,["loading","books","totalBooks"]),y=re(1).users,w=ae(h,200),C=a.a.useState({isFiction:!0,Genre:"Mystery"}),B=Object(u.a)(C,2),A=B[0],I=B[1],S=a.a.useState(!1),D=Object(u.a)(S,2),R=D[0],N=D[1];console.log(A);var P={margin:"10px"},T="isFiction",E="Genre",M=function(e){return function(t){var n=Object(f.a)(Object(f.a)({},A),{},Object(ie.a)({},e,t.target.value));I(n)}};return Object(U.jsxs)(U.Fragment,{children:[(i||r||R)&&Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:function(){i&&n(),c(!1),N(!1)},style:{margin:"10px"},children:"Go Back"}),Object(U.jsxs)(p.a,{maxWidth:!1,children:[h&&w&&Object(U.jsx)(J.a,{}),!h&&!w&&!r&&!R&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:"title-container",children:[Object(U.jsx)("h2",{className:"title-container",children:"There are ".concat(g," book").concat(1===g?"":"s")}),(i||(null===(t=y[0])||void 0===t?void 0:t.isAuthor))&&Object(U.jsx)(b.a,{variant:"contained",color:"primary",startIcon:Object(U.jsx)(q.a,{}),onClick:function(){return c(!0)},children:"Add Book"}),Object(U.jsxs)("div",{style:P,children:[Object(U.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return j((function(e){return Math.max(e-1,1)}))},style:P,children:"Previous Page"}),Object(U.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return j((function(e){return Math.min(e+1,Math.ceil(g/3))}))},style:P,children:"Next Page"})]})]}),Object(U.jsx)("div",{className:"main-container",children:x.map((function(e){var t;return Object(U.jsx)(O.a,{style:{margin:"16px",padding:"16px"},children:Object(U.jsx)(he,{book:e,bookActions:k,isAdmin:i,isAuthor:null===(t=y[0])||void 0===t?void 0:t.isAuthor,userID:o.currentUser.id,setIsReviewButtonClicked:N,setIsAddBookButtonClicked:c,setTempBook:I},Math.random())})}))})]}),!h&&!w&&r&&Object(U.jsxs)(U.Fragment,{children:[A.coverImageUrl&&Object(U.jsx)("img",{src:A.coverImageUrl,alt:"cover",style:{maxWidth:"25%",maxHeight:"25%"}}),Object(U.jsxs)(O.a,{children:[Object.entries({name:"Name",author:"Author",translator:"Translator",editor:"Editor",coverImageUrl:"Cover Image URL",publisher:"Publisher",year:"Year"}).map((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(U.jsx)(m.a,{label:r,style:P,onChange:M(n)},n)})),Object(U.jsx)(ue.a,{id:"demo-simple-select-label",style:P,children:"Fiction or Non-fiction?"}),Object(U.jsxs)(de.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:A.isFiction,label:"Age",onChange:M(T),style:P,children:[Object(U.jsx)(je.a,{value:!0,children:"Fiction"}),Object(U.jsx)(je.a,{value:!1,children:"Non-fiction"})]}),A.isFiction&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ue.a,{id:"demo-simple-select-label2",style:P,children:"Genre:"}),Object(U.jsxs)(de.a,{labelId:"demo-simple-select-label2",id:"demo-simple-select2",value:A.Genre,label:"Genre",onChange:M(E),style:P,children:[Object(U.jsx)(je.a,{value:"Mystery",children:"Mystery"}),Object(U.jsx)(je.a,{value:"Thriller",children:"Thriller"}),Object(U.jsx)(je.a,{value:"Horror",children:"Horror"}),Object(U.jsx)(je.a,{value:"Western",children:"Western"}),Object(U.jsx)(je.a,{value:"Romance",children:"Romance"}),Object(U.jsx)(je.a,{value:"Science",children:"Science"})]})]}),Object(U.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){k.saveBook(A),c(!1),I({isFiction:!0,Genre:"Mystery"})},style:P,children:"Save"})]})]}),!h&&!w&&R&&Object(U.jsxs)(O.a,{children:[Object(U.jsx)(m.a,{label:"review",style:P,onChange:function(e){var t=(null===A||void 0===A?void 0:A.reviews)||{},n=Object(f.a)(Object(f.a)({},t),{},Object(ie.a)({},o.currentUser.id,e.target.value)),r=Object(f.a)(Object(f.a)({},A),{},{reviews:n});I(r)},multiline:!0}),Object(U.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){k.updateBook(A._id,{reviews:A.reviews}),c(!1),N(!1),I({review:""})},style:P,children:"Save"})]})]})]})},Oe=function(e){var t=e.adminCurrentPage,n=e.setAdminCurrentPage,r=a.a.useState(!1),c=Object(u.a)(r,2),i=c[0],o=c[1],s=a.a.useState(!1),l=Object(u.a)(s,2),d=l[0],j=l[1],v=function(){n("books")},f=function(){n("users")},h=function(){n(i?"books":d?"users":"panel")};return Object(U.jsx)(U.Fragment,{children:function(){switch(t){case"panel":return Object(U.jsxs)("div",{style:{display:"flex",justifyContent:"center",padding:"16px"},children:[Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:v,style:{marginRight:"16px"},children:"Books"}),Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:f,children:"Users"})]});case"books":return Object(U.jsx)(pe,{handleBackButtonClick:h,isAddBookButtonClicked:i,setIsAddBookButtonClicked:o,isAdmin:!0});case"users":return Object(U.jsx)(ce,{handleBackButtonClick:h,isAddUserClicked:d,setIsAddUserClicked:j});default:return null}}()})},me=function(e){var t,n,a=e.currentUser,c=e.isAdmin,i=re(1),o=(i.loading,i.users),s=(i.totalUsers,Object(z.a)(i,["loading","users","totalUsers"])),l=Object(r.useState)({}),d=Object(u.a)(l,2),j=d[0],v=d[1],f=Object(r.useState)(""),h=Object(u.a)(f,2),x=h[0],g=h[1],k=Object(r.useState)(0),y=Object(u.a)(k,2),w=y[0],C=y[1],B=Object(r.useState)(1),A=Object(u.a)(B,2),I=A[0],S=A[1],F=le(0,I,"profile"),D=F.books,R=F.numberOfReads,N=F.totalBooks,P=F.ratedBooks,T=Object(z.a)(F,["books","numberOfReads","totalBooks","ratedBooks"]),E=Object(r.useMemo)((function(){return{username:"username"}}),[]);Object(r.useEffect)((function(){g(null===a||void 0===a?void 0:a.id)}),[a]),Object(r.useEffect)((function(){var e;if(!(null===(e=o[0])||void 0===e?void 0:e.isAuthor)&&P.length>0){var t=P.reduce((function(e,t){return e+parseFloat(t.ratings[x])}),0);C(t/P.length)}}),[P,x,o]);var M;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(p.a,{maxWidth:"sm",style:{marginTop:"32px"},children:Object(U.jsxs)(O.a,{children:[Object(U.jsx)("div",{style:{margin:"10px",fontSize:"30px",display:"flex",justifyContent:"center"},children:"Profile Page"}),Object(U.jsxs)("div",{style:{margin:"10px",display:"flex"},children:["Username:",Object(U.jsx)(m.a,{value:j.username||(null===(t=o[0])||void 0===t?void 0:t.username),onChange:(M=E.username,function(e){var t=Object(ie.a)({},M,e.target.value);v(t)}),style:{marginLeft:"16px"}})]}),Object(U.jsxs)("div",{style:{margin:"10px",display:"flex"},children:["Number of Books Read: ",R]}),!(null===(n=o[0])||void 0===n?void 0:n.isAuthor)&&Object(U.jsxs)("div",{style:{margin:"10px",display:"flex"},children:["Average Rating: ",w.toFixed(2)]}),Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:function(){return s.updateUser(x,{isAuthor:!0})},style:{margin:"10px"},children:"I am an author!"}),Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:function(){return s.updateUser(x,j)},style:{margin:"10px"},children:"Save"})]})}),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{children:[Object(U.jsx)("h2",{className:"title-container",children:"You have ".concat(N," favorite book").concat(1===N?"":"s")}),Object(U.jsxs)("div",{style:{margin:"10px",display:"flex",justifyContent:"center"},children:[Object(U.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return S((function(e){return Math.max(e-1,1)}))},style:{margin:"10px"},children:"Previous Page"}),Object(U.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return S((function(e){return Math.min(e+1,Math.ceil(N/3))}))},style:{margin:"10px"},children:"Next Page"})]})]}),Object(U.jsx)("div",{className:"main-container",children:D.map((function(e){return Object(U.jsx)(O.a,{style:{margin:"16px",padding:"16px"},children:Object(U.jsx)(he,{book:e,bookActions:T,isAdmin:c,userID:null===a||void 0===a?void 0:a.id,isReviewDisabled:!0},String(e._id))})}))})]})]})},xe=function(e){var t=e.isAddBookButtonClicked,n=e.setIsAddBookButtonClicked,r=F(),c=a.a.useState(1),i=Object(u.a)(c,2),o=i[0],s=i[1],l=le(3,o,"reviews"),d=l.loading,j=l.books,v=l.reviewedBooks,h=(l.totalBooks,Object(z.a)(l,["loading","books","reviewedBooks","totalBooks"]));console.log(v),console.log("pn",o),console.log(j);var x=ae(d,200),g=a.a.useState({isFiction:!0,Genre:"Mystery"}),k=Object(u.a)(g,2),y=k[0],w=k[1],C={margin:"10px"},B="isFiction",A="Genre",I=function(e){return function(t){var n=Object(f.a)(Object(f.a)({},y),{},Object(ie.a)({},e,t.target.value));w(n)}};return Object(U.jsxs)(U.Fragment,{children:[t&&Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:function(){n(!1)},style:{margin:"10px"},children:"Go Back"}),Object(U.jsxs)(p.a,{maxWidth:!1,children:[d&&x&&Object(U.jsx)(J.a,{}),!d&&!x&&!t&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:"title-container",children:[Object(U.jsx)("h2",{className:"title-container",children:"You have ".concat(v.length," review").concat(1===v.length?"":"s")}),Object(U.jsxs)("div",{style:C,children:[Object(U.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return s((function(e){return Math.max(e-1,1)}))},style:C,children:"Previous Page"}),Object(U.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return s((function(e){return Math.min(e+1,Math.ceil(v.length/3))}))},style:C,children:"Next Page"})]})]}),Object(U.jsx)("div",{className:"main-container",children:j.map((function(e){return Object(U.jsx)(O.a,{style:{margin:"16px",padding:"16px"},children:Object(U.jsx)(he,{book:e,bookActions:h,isAdmin:!1,userID:r.currentUser.id,isReviewDisabled:!0,isRatingDisabled:!0,showReview:!0,showRating:!0},Math.random())})}))})]}),!d&&!x&&t&&Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(O.a,{children:[Object.entries({name:"Name",author:"Author",translator:"Translator",editor:"Editor",coverImageUrl:"Cover Image URL",publisher:"Publisher",year:"Year"}).map((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(U.jsx)(m.a,{label:r,style:C,onChange:I(n)},n)})),Object(U.jsx)(ue.a,{id:"demo-simple-select-label",style:C,children:"Fiction or Non-fiction?"}),Object(U.jsxs)(de.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:y.isFiction,label:"Age",onChange:I(B),style:C,children:[Object(U.jsx)(je.a,{value:!0,children:"Fiction"}),Object(U.jsx)(je.a,{value:!1,children:"Non-fiction"})]}),y.isFiction&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ue.a,{id:"demo-simple-select-label2",style:C,children:"Genre:"}),Object(U.jsxs)(de.a,{labelId:"demo-simple-select-label2",id:"demo-simple-select2",value:y.Genre,label:"Genre",onChange:I(A),style:C,children:[Object(U.jsx)(je.a,{value:"Mystery",children:"Mystery"}),Object(U.jsx)(je.a,{value:"Thriller",children:"Thriller"}),Object(U.jsx)(je.a,{value:"Horror",children:"Horror"}),Object(U.jsx)(je.a,{value:"Western",children:"Western"}),Object(U.jsx)(je.a,{value:"Romance",children:"Romance"}),Object(U.jsx)(je.a,{value:"Science",children:"Science"})]})]}),Object(U.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){h.saveBook(y),n(!1),w({isFiction:!0,Genre:"Mystery"})},style:C,children:"Save"})]})})]})]})},ge=n(103),ke=n(190),ye=n(80),we=n(189),Ce=n(79),Be=n(78),Ue={green:Object(f.a)(Object(f.a)({},ye.a),{},{500:"#09804C",A400:"#B9EACD"}),purple:Object(f.a)(Object(f.a)({},we.a),{},{500:"#6200EE",A400:"#9795F9"}),orange:Ce.a,red:Be.a},Ae={palette:{primary:Ue.green,secondary:Ue.green}},Ie=Object(ge.a)(Ae);function Se(e){var t=e.children;return Object(U.jsx)(ke.a,{theme:Ie,children:t})}function Fe(){return Object(U.jsx)(v.a,{className:"app-bar-title",component:"h1",variant:"h5",children:"IBDb: Internet Book Database"})}n(133);function De(){return Object(U.jsx)(Se,{children:Object(U.jsx)(S,{appId:B.a,children:Object(U.jsx)(Re,{})})})}function Re(){var e=F(),t=e.currentUser,n=e.logOut,c=a.a.useState(!1),i=Object(u.a)(c,2),o=i[0],f=i[1],h=a.a.useState("home"),p=Object(u.a)(h,2),O=p[0],m=p[1],x=a.a.useState("panel"),g=Object(u.a)(x,2),k=g[0],y=g[1],w=a.a.useState(!1),C=Object(u.a)(w,2),B=C[0],A=C[1],I={margin:"10px"},S="home",D="profile",R="admin",N="books",P="reviews";return Object(r.useEffect)((function(){var e="6283fd2ac3ac799e65415025";f((null===t||void 0===t?void 0:t.id)===e),(null===t||void 0===t?void 0:t.id)===e&&m(R)}),[t,R]),Object(U.jsxs)("div",{className:"App",children:[Object(U.jsx)(d.a,{position:"sticky",children:Object(U.jsxs)(j.a,{children:[Object(U.jsx)(Fe,{}),t&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(o?R:S),o&&y("panel");case 2:case"end":return e.stop()}}),e)}))),style:I,children:Object(U.jsx)(v.a,{variant:"button",children:"Home"})}),!o&&Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(P);case 1:case"end":return e.stop()}}),e)}))),style:I,children:Object(U.jsx)(v.a,{variant:"button",children:"Reviews"})}),!o&&Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(N);case 1:case"end":return e.stop()}}),e)}))),style:I,children:Object(U.jsx)(v.a,{variant:"button",children:"Books"})}),!o&&Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(D);case 1:case"end":return e.stop()}}),e)}))),style:I,children:Object(U.jsx)(v.a,{variant:"button",children:"Profile"})}),Object(U.jsx)(b.a,{variant:"contained",color:"secondary",onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("error",e.t0);case 8:window.location.reload();case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),style:I,children:Object(U.jsx)(v.a,{variant:"button",children:"Log Out"})})]})]})}),t&&o&&O===R&&Object(U.jsx)(Oe,{adminCurrentPage:k,setAdminCurrentPage:y}),!t&&!o&&O===S&&Object(U.jsx)(H,{}),t&&!o&&O===P&&Object(U.jsx)(xe,{isAddBookButtonClicked:B,setIsAddBookButtonClicked:A}),t&&!o&&O===N&&Object(U.jsx)(pe,{isAddBookButtonClicked:B,setIsAddBookButtonClicked:A}),!o&&t&&O===D&&Object(U.jsx)(me,{currentUser:t,isAdmin:o})]})}var Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,200)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(De,{})}),document.getElementById("root")),Ne()},32:function(e){e.exports=JSON.parse('{"a":"awesomeapp-acjwu","b":"https://realm.mongodb.com","c":"mongodb-atlas"}')}},[[134,1,2]]]);
//# sourceMappingURL=main.a9c83a6c.chunk.js.map