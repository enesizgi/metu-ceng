(this["webpackJsonpweb-js"]=this["webpackJsonpweb-js"]||[]).push([[0],{118:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(16),o=n.n(c),i=(n(118),n(3)),s=n.n(i),u=n(8),l=n(7),d=n(189),j=n(190),b=n(183),f=n(133),p=n(9),v=n(47),h=n(178),m=n(179),O=n(194),x=n(182),g=n(177),k=n(100),w=n.n(k),y=n(101),C=n.n(y),U=n(32),B=n(2);function A(e){return new v.a({id:e,baseUrl:U.b})}var I=a.a.createContext(null);function S(e){var t=e.appId,n=e.children,r=a.a.useState(A(t)),c=Object(l.a)(r,2),o=c[0],i=c[1];a.a.useEffect((function(){i(A(t))}),[t]);var d=a.a.useState(o.currentUser),j=Object(l.a)(d,2),b=j[0],f=j[1],v=a.a.useCallback(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.logIn(t);case 2:f(o.currentUser);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o]),h=a.a.useCallback(Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===b||void 0===b?void 0:b.logOut();case 2:return e.next=4,o.removeUser(b);case 4:f(o.currentUser);case 5:case"end":return e.stop()}}),e)}))),[o,b]),m=a.a.useCallback((function(){var e=Object.values(o.allUsers).filter((function(e){return e.isLoggedIn}));o.switchUser(e.find((function(e){return"6283fd2ac3ac799e65415025"===e.id}))),f(o.currentUser)}),[o]),O=a.a.useCallback((function(e){var t=Object.values(o.allUsers).find((function(t){return t.id===e}));t&&(o.switchUser(t),f(o.currentUser))}),[o]),x=a.a.useCallback(function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.values(o.allUsers).find((function(e){return e.isLoggedIn})),e.next=3,n.logOut();case 3:return e.next=5,o.removeUser(n);case 5:return f(o.currentUser),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o]),g=a.a.useMemo((function(){return Object(p.a)(Object(p.a)({},o),{},{switchUser:O,currentUser:b,logIn:v,logOut:h,switchToAdmin:m,removeUser:x})}),[o,O,b,v,h,m,x]);return Object(B.jsx)(I.Provider,{value:g,children:n})}function D(){var e=a.a.useContext(I);if(!e)throw new Error("No Realm App found. Make sure to call useRealmApp() inside of a <RealmAppProvider />.");return e}var F=n(18),E=function(e){return!e},P=function(e,t){return!(t<0||t>=e.length)};function N(e,t,n){if(!P(e,t)&&t!==e.length)throw new Error("Cannot add value. Array index out of bounds.");return[].concat(Object(F.a)(e.slice(0,t)),[n],Object(F.a)(e.slice(t)))}function T(e,t,n){if(!P(e,t))throw new Error("Cannot replace value. Array index out of bounds.");return[].concat(Object(F.a)(e.slice(0,t)),[n],Object(F.a)(e.slice(t+1)))}function _(e,t,n){if(!P(e,t))throw new Error("Cannot update value. Array index out of bounds.");return[].concat(Object(F.a)(e.slice(0,t)),[n(e[t])],Object(F.a)(e.slice(t+1)))}function M(e,t){if(!P(e,t))throw new Error("Cannot remove value. Array index out of bounds.");return[].concat(Object(F.a)(e.slice(0,t)),Object(F.a)(e.slice(t+1)))}var R=function(e,t){var n=e.findIndex((function(e){return n=e,r=t,String(null===n||void 0===n?void 0:n._id)===String(null===r||void 0===r?void 0:r._id);var n,r}));return n>=0?n:null},L=n(193);function W(e){return Object(B.jsx)(L.a,Object(p.a)({elevation:6,variant:"filled"},e))}function H(e){var t=e.isOpen,n=e.message,r=e.onClose,a=void 0===r?function(){}:r;return t?Object(B.jsx)(W,{onClose:a,severity:"error",children:n}):null}function z(e){var t,n,r=e.isAdminLogin,c=e.onRegisterHandler,o=D(),i=a.a.useState(!!r),d=Object(l.a)(i,2),j=d[0],k=d[1],y={email:null,password:null,other:null},U=a.a.useState(y),A=Object(l.a)(U,2),I=A[0],S=A[1],F=function(){return S(y)},P=function(e){var t=e.error,n=e.clearError,r=e.hideAfterMs,c=a.a.useState(!1),o=Object(l.a)(c,2),i=o[0],s=o[1],u=a.a.useCallback((function(){n(),s(!1)}),[n]);return a.a.useEffect((function(){if(t){if(s(!0),r){var e=setTimeout((function(){u()}),r);return function(){clearTimeout(e)}}}else s(!1)}),[t,u,r]),function(){return Object(B.jsx)(H,{isOpen:i,message:t,onClose:function(){u()}})}}({error:I.other,clearError:function(){S((function(e){return Object(p.a)(Object(p.a)({},e),{},{other:null})}))}}),N=a.a.useState(!1),T=Object(l.a)(N,2),_=T[0],M=T[1],R=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,a=t.password,F(),e.prev=2,!j){e.next=6;break}return e.next=6,o.emailPasswordAuth.registerUser(n,a);case 6:if(r){e.next=11;break}return e.next=9,o.logIn(v.b.emailPassword(n,a));case 9:e.next=17;break;case 11:return i=v.b.emailPassword(n,a),e.next=14,o.logIn(i);case 14:o.removeUser(i),o.switchToAdmin(),c();case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),console.log("error"),J(e.t0,S);case 23:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsx)(h.a,{className:"main-container",children:Object(B.jsx)(m.a,{className:"auth-card",variant:"outlined",children:Object(B.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.target),n=Object.fromEntries(t.entries()),r=n.email,a=n.password;R({email:r,password:a})},children:[Object(B.jsx)(f.a,{component:"h2",variant:"h4",gutterBottom:!0,children:j?"Sign Up":"Log In"}),Object(B.jsx)(P,{}),Object(B.jsx)(O.a,{id:"input-email",name:"email",label:"Email Address",variant:"outlined",error:Boolean(I.email),helperText:null!==(t=I.email)&&void 0!==t?t:""}),Object(B.jsx)(O.a,{id:"input-password",type:_?"text":"password",name:"password",label:"Password",variant:"outlined",error:Boolean(I.password),helperText:null!==(n=I.password)&&void 0!==n?n:"",InputProps:{endAdornment:Object(B.jsx)(x.a,{position:"end",children:Object(B.jsx)(g.a,{"aria-label":"toggle password visibility",onClick:function(){return M(E)},onMouseDown:function(e){e.preventDefault()},children:_?Object(B.jsx)(w.a,{}):Object(B.jsx)(C.a,{})})})}}),Object(B.jsx)(b.a,{type:"submit",variant:"contained",color:"primary",children:j?"Create Account":"Log In"}),Object(B.jsxs)("button",{type:"button",className:"link-button",onClick:function(){return F(),void k(E)},children:[j&&!r&&"Already have an account? Log In",!j&&!r&&"Sign up for an account"]})]})})})}function J(e,t){var n=function(){t((function(e){return Object(p.a)(Object(p.a)({},e),{},{other:"Something went wrong. Try again in a little bit."})})),console.warn("Something went wrong with a Realm login or signup request. See the following error for details."),console.error(e)};if(e instanceof v.c){var r=e.error,a=e.statusCode;switch(r||a){case"invalid username":t((function(e){return Object(p.a)(Object(p.a)({},e),{},{email:"Invalid email address."})}));break;case"invalid username/password":case"invalid password":case 401:t((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:"Incorrect password."})}));break;case"name already in use":case 409:t((function(e){return Object(p.a)(Object(p.a)({},e),{},{email:"Email is already registered."})}));break;case"password must be between 6 and 128 characters":case 400:t((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:"Password must be between 6 and 128 characters."})}));break;default:n()}}else n()}var q=n(29),Y=n(184),G=n(76),K=n.n(G),$=n(75),Q=n.n($),V=function(e){var t,n=e.user,r=e.userActions;return Object(B.jsxs)("div",{children:[Object(B.jsx)(g.a,{edge:"end",size:"small",onClick:function(){"admin"!==n.username&&r.deleteUser(n)},children:Object(B.jsx)(Q.a,{})}),Object(B.jsxs)("p",{children:["Username: ",null===n||void 0===n?void 0:n.username]}),Object(B.jsxs)("p",{children:["Email: ",null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.email]})]})};function X(e){var t=e.cluster,n=void 0===t?"mongodb-atlas":t,r=e.db,c=e.collection,o=D();return a.a.useMemo((function(){return o.currentUser.mongoClient(n).db(r).collection(c)}),[o.currentUser,n,r,c])}var Z=n(68),ee=function(){},te={onInsert:ee,onUpdate:ee,onReplace:ee,onDelete:ee};function ne(e,t){var n=a.a.useMemo((function(){return{}}),[]),r=Object(p.a)(Object(p.a)({},te),t),c=a.a.useRef(r);a.a.useEffect((function(){c.current={onInsert:r.onInsert,onUpdate:r.onUpdate,onReplace:r.onReplace,onDelete:r.onDelete}}),[r.onInsert,r.onUpdate,r.onReplace,r.onDelete]),a.a.useEffect((function(){(function(){var t=Object(u.a)(s.a.mark((function t(){var r,a,o,i,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,a=!1,t.prev=2,i=Object(Z.a)(e.watch({filter:n}));case 4:return t.next=6,i.next();case 6:return u=t.sent,r=u.done,t.next=10,u.value;case 10:if(l=t.sent,r){t.next=28;break}d=l,t.t0=d.operationType,t.next="insert"===t.t0?16:"update"===t.t0?18:"replace"===t.t0?20:"delete"===t.t0?22:24;break;case 16:return c.current.onInsert(d),t.abrupt("break",25);case 18:return c.current.onUpdate(d),t.abrupt("break",25);case 20:return c.current.onReplace(d),t.abrupt("break",25);case 22:return c.current.onDelete(d),t.abrupt("break",25);case 24:throw new Error("Invalid change operation type: ".concat(d.operationType));case 25:r=!0,t.next=4;break;case 28:t.next=34;break;case 30:t.prev=30,t.t1=t.catch(2),a=!0,o=t.t1;case 34:if(t.prev=34,t.prev=35,r||null==i.return){t.next=39;break}return t.next=39,i.return();case 39:if(t.prev=39,!a){t.next=42;break}throw o;case 42:return t.finish(39);case 43:return t.finish(34);case 44:case"end":return t.stop()}}),t,null,[[2,30,34,44],[35,,39,43]])})));return function(){return t.apply(this,arguments)}})()()}),[e,n])}var re=function(e){var t=D(),n=a.a.useState([]),c=Object(l.a)(n,2),o=c[0],i=c[1],d=a.a.useState(!0),j=Object(l.a)(d,2),b=j[0],f=j[1],p=a.a.useState(0),v=Object(l.a)(p,2),h=v[0],m=v[1],O=X({cluster:U.c,db:"data",collection:"users"});Object(r.useEffect)((function(){O.count().then((function(e){return m(e)})),t.currentUser.callFunction("getDocumentsWithLimit",{limit:3,skip:3*(e-1),collection:"users"}).then((function(e){i(e),f(!1)}))}),[O,e,t.currentUser]),ne(O,{onInsert:function(e){i((function(t){var n;if(b)return t;var r=null!==(n=R(t,e.fullDocument))&&void 0!==n?n:t.length;return r===t.length?N(t,r,e.fullDocument):t}))},onUpdate:function(e){i((function(t){return b?t:_(t,R(t,e.fullDocument),(function(){return e.fullDocument}))}))},onReplace:function(e){i((function(t){return b?t:T(t,R(t,e.fullDocument),e.fullDocument)}))},onDelete:function(e){i((function(t){if(b)return t;var n=R(t,{_id:e.documentKey._id});return n>=0?M(t,n):t}))}});var x=function(){var e=Object(u.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._partition=t.currentUser.id,e.prev=1,e.next=4,O.insertOne(n);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.error.match(/^Duplicate key error/)&&console.warn("The following error means that we tried to insert a todo multiple times (i.e. an existing todo has the same _id). In this app we just catch the error and move on. In your app, you might want to debounce the save input or implement an additional loading state to avoid sending the request in the first place."),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.updateOne({userID:t},{$set:n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}();return{loading:b,users:o,totalUsers:h,saveUser:x,toggleUser:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.updateOne({_id:t._id},{$set:{isComplete:!t.isComplete}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteUser:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.deleteOne({_id:t._id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateUser:g}};function ae(e,t){var n,r,c=a.a.useState(!1),o=Object(l.a)(c,2),i=o[0],s=o[1];return n=function(){e&&s(!0)},r=[t],a.a.useEffect((function(){var e=setTimeout((function(){n()}),r);return function(){return clearTimeout(e)}}),[n,r]),a.a.useEffect((function(){e||s(!1)}),[e]),i}var ce=function(e){var t=e.handleBackButtonClick,n=e.isAddUserClicked,r=e.setIsAddUserClicked,c=a.a.useState(1),o=Object(l.a)(c,2),i=o[0],s=o[1],u=re(i),d=u.loading,j=u.users,f=u.totalUsers,p=Object(q.a)(u,["loading","users","totalUsers"]),v=ae(d,200),O={margin:"10px"};return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(b.a,{variant:"contained",color:"secondary",onClick:function(){t(),r(!1)},style:{margin:"10px"},children:"Go Back"}),!n&&Object(B.jsx)(h.a,{className:"main-container",maxWidth:!1,style:{padding:0,margin:0},children:d&&v?Object(B.jsx)(Y.a,{}):Object(B.jsxs)("div",{style:{display:"block",width:"100%",maxWidth:"100%"},children:[Object(B.jsxs)("div",{className:"title-container",children:[Object(B.jsx)("h2",{children:"You have ".concat(f," user").concat(1===f?"":"s")}),Object(B.jsx)(b.a,{variant:"contained",color:"primary",startIcon:Object(B.jsx)(K.a,{}),onClick:function(){r(!0)},children:"Add User"}),Object(B.jsxs)("div",{style:O,children:[Object(B.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return s((function(e){return Math.max(e-1,1)}))},style:O,children:"Previous Page"}),Object(B.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return s((function(e){return Math.min(e+1,Math.ceil(f/3))}))},style:O,children:"Next Page"})]})]}),Object(B.jsx)("div",{className:"main-container",children:j.map((function(e){return Object(B.jsx)(m.a,{style:{minWidth:"25%",padding:"16px",margin:"16px"},children:Object(B.jsx)(V,{user:e,userActions:p},JSON.stringify(e))})}))})]})}),n&&Object(B.jsx)(z,{isAdminLogin:!0,onRegisterHandler:function(){r(!1)}})]})},oe=n(12),ie=function(e,t,n){var c=D(),o=a.a.useState([]),i=Object(l.a)(o,2),d=i[0],j=i[1],b=a.a.useState(!0),f=Object(l.a)(b,2),p=f[0],v=f[1],h=a.a.useState(0),m=Object(l.a)(h,2),O=m[0],x=m[1],g=X({cluster:U.c,db:"data",collection:"books"}),k=Object(r.useCallback)((function(){"profile"===n&&(g.count({favoritedBy:c.currentUser.id}).then((function(e){return x(e)})),c.currentUser.callFunction("getFavoriteBooksByUser",{limit:e||3,skip:(t-1)*(e||3)}).then((function(e){j(e),v(!1)})))}),[g,t,e,c,n]);Object(r.useEffect)((function(){"profile"!==n?(g.count().then((function(e){return x(e)})),c.currentUser.callFunction("getDocumentsWithLimit",{limit:e||3,skip:(t-1)*(e||3),collection:"books"}).then((function(e){j(e),v(!1)}))):k()}),[g,e,t,c.currentUser,n,k]),ne(g,{onInsert:function(e){j((function(t){var n;if(p)return t;var r=null!==(n=R(t,e.fullDocument))&&void 0!==n?n:t.length;return r===t.length?N(t,r,e.fullDocument):t}))},onUpdate:function(e){j((function(t){return p?t:_(t,R(t,e.fullDocument),(function(){return e.fullDocument}))}))},onReplace:function(e){j((function(t){return p?t:T(t,R(t,e.fullDocument),e.fullDocument)}))},onDelete:function(e){j((function(t){if(p)return t;var n=R(t,{_id:e.documentKey._id});return n>=0?M(t,n):t}))}});var w=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._partition=c.currentUser.id,e.prev=1,e.next=4,g.insertOne(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.error.match(/^Duplicate key error/)&&console.warn("The following error means that we tried to insert a todo multiple times (i.e. an existing todo has the same _id). In this app we just catch the error and move on. In your app, you might want to debounce the save input or implement an additional loading state to avoid sending the request in the first place."),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.updateOne(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.currentUser.callFunction("addBookToFavorite",{bookID:String(t._id)});case 3:k(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.currentUser.callFunction("removeBookFromFavorite",{bookID:String(t._id)});case 3:k(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.currentUser.callFunction("rateABook",{bookID:String(n._id),rating:parseFloat(t)});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}();return{loading:p,books:d,totalBooks:O,saveBook:w,deleteBook:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.deleteOne({_id:t._id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateBook:y,addToFavoriteBook:C,removeFromFavoriteBook:B,rateABook:A}},se=n(196),ue=n(192),le=n(197),de=n(191),je=n(185),be=n(186),fe=function(e){var t,n=e.book,r=e.bookActions,a=e.isAdmin,c=e.userID,o=null===n||void 0===n||null===(t=n.favoritedBy)||void 0===t?void 0:t.includes(c),i=Object.values((null===n||void 0===n?void 0:n.ratings)||{}),s=i.length?i.reduce((function(e,t){return e+t}))/i.length:0;return Object(B.jsxs)("div",{children:[n.coverImageUrl&&Object(B.jsx)("img",{src:n.coverImageUrl,alt:"cover",style:{maxWidth:"40%",maxHeight:"40%"}}),a&&Object(B.jsx)(g.a,{edge:"end",size:"small",onClick:function(){r.deleteBook(n)},children:Object(B.jsx)(Q.a,{})}),!a&&Object(B.jsxs)(g.a,{edge:"end",size:"small",onClick:function(){o?r.removeFromFavoriteBook(n):r.addToFavoriteBook(n)},children:[o&&Object(B.jsx)(je.a,{}),!o&&Object(B.jsx)(be.a,{})]}),Object(B.jsxs)("p",{children:["Title: ",null===n||void 0===n?void 0:n.title]}),Object(B.jsxs)("p",{children:["Author: ",null===n||void 0===n?void 0:n.author]}),Object(B.jsxs)("p",{children:["Translator: ",null===n||void 0===n?void 0:n.translator]}),Object(B.jsxs)("p",{children:["Editor: ",null===n||void 0===n?void 0:n.editor]}),Object(B.jsxs)("p",{children:["Publisher: ",null===n||void 0===n?void 0:n.publisher]}),Object(B.jsxs)("div",{style:{marginBottom:"16px"},children:["Rating:",Object(B.jsx)(de.a,{value:s,precision:.1,readOnly:!0})]}),!a&&Object(B.jsxs)("div",{children:["Click to rate:",Object(B.jsx)(de.a,{precision:.25,onChange:function(e){console.log(typeof e.target.value),r.rateABook(e.target.value,n)}})]})]})},pe=function(e){var t=e.handleBackButtonClick,n=e.isAddBookButtonClicked,r=e.setIsAddBookButtonClicked,c=e.isAdmin,o=D(),i=a.a.useState(1),s=Object(l.a)(i,2),u=s[0],d=s[1],j=ie(0,u),f=j.loading,v=j.books,x=j.totalBooks,g=Object(q.a)(j,["loading","books","totalBooks"]),k=ae(f,200),w=a.a.useState({isFiction:!0}),y=Object(l.a)(w,2),C=y[0],U=y[1];console.log(v);var A={margin:"10px"},I=function(e){return function(t){var n=Object(p.a)(Object(p.a)({},C),{},Object(oe.a)({},e,t.target.value));U(n)}};return Object(B.jsxs)(B.Fragment,{children:[c&&Object(B.jsx)(b.a,{variant:"contained",color:"secondary",onClick:function(){t(),r(!1)},style:{margin:"10px"},children:"Go Back"}),Object(B.jsxs)(h.a,{maxWidth:!1,children:[f&&k&&Object(B.jsx)(Y.a,{}),!f&&!k&&!n&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("div",{className:"title-container",children:[Object(B.jsx)("h2",{className:"title-container",children:"You have ".concat(x," book").concat(1===x?"":"s")}),Object(B.jsx)(b.a,{variant:"contained",color:"primary",startIcon:Object(B.jsx)(K.a,{}),onClick:function(){return r(!0)},children:"Add Book"}),Object(B.jsxs)("div",{style:A,children:[Object(B.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return d((function(e){return Math.max(e-1,1)}))},style:A,children:"Previous Page"}),Object(B.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return d((function(e){return Math.min(e+1,Math.ceil(x/3))}))},style:A,children:"Next Page"})]})]}),Object(B.jsx)("div",{className:"main-container",children:v.map((function(e){return Object(B.jsx)(m.a,{style:{margin:"16px",padding:"16px"},children:Object(B.jsx)(fe,{book:e,bookActions:g,isAdmin:c,userID:o.currentUser.id},Math.random())})}))})]}),!f&&!k&&n&&Object(B.jsxs)(B.Fragment,{children:[C.coverImageUrl&&Object(B.jsx)("img",{src:C.coverImageUrl,alt:"cover",style:{maxWidth:"40%",maxHeight:"40%"}}),Object(B.jsxs)(m.a,{children:[Object.entries({name:"Name",author:"Author",translator:"Translator",editor:"Editor",coverImageUrl:"Cover Image URL",publisher:"Publisher"}).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(B.jsx)(O.a,{label:r,style:A,onChange:I(n)},n)})),Object(B.jsx)(se.a,{id:"demo-simple-select-label",style:A,children:"Fiction or Non-fiction?"}),Object(B.jsxs)(ue.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:C.isFiction,label:"Age",onChange:I("isFiction"),style:A,children:[Object(B.jsx)(le.a,{value:!0,children:"Fiction"}),Object(B.jsx)(le.a,{value:!1,children:"Non-fiction"})]}),Object(B.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){g.saveBook(C),r(!1),U({isFiction:!0})},style:A,children:"Save"})]})]})]})]})},ve=function(e){var t=e.adminCurrentPage,n=e.setAdminCurrentPage,r=a.a.useState(!1),c=Object(l.a)(r,2),o=c[0],i=c[1],s=a.a.useState(!1),u=Object(l.a)(s,2),d=u[0],j=u[1],f=function(){n("books")},p=function(){n("users")},v=function(){n(o?"books":d?"users":"panel")};return Object(B.jsx)(B.Fragment,{children:function(){switch(t){case"panel":return Object(B.jsxs)("div",{style:{display:"flex",justifyContent:"center",padding:"16px"},children:[Object(B.jsx)(b.a,{variant:"contained",color:"secondary",onClick:f,style:{marginRight:"16px"},children:"Books"}),Object(B.jsx)(b.a,{variant:"contained",color:"secondary",onClick:p,children:"Users"})]});case"books":return Object(B.jsx)(pe,{handleBackButtonClick:v,isAddBookButtonClicked:o,setIsAddBookButtonClicked:i,isAdmin:!0});case"users":return Object(B.jsx)(ce,{handleBackButtonClick:v,isAddUserClicked:d,setIsAddUserClicked:j});default:return null}}()})},he=function(e){var t,n=e.currentUser,a=e.isAdmin,c=re(1),o=(c.loading,c.users),i=(c.totalUsers,Object(q.a)(c,["loading","users","totalUsers"])),s=Object(r.useState)({}),u=Object(l.a)(s,2),d=u[0],j=u[1],f=Object(r.useState)(""),p=Object(l.a)(f,2),v=p[0],x=p[1],g=Object(r.useState)(1),k=Object(l.a)(g,2),w=k[0],y=k[1],C=ie(0,w,"profile"),U=C.books,A=C.totalBooks,I=Object(q.a)(C,["books","totalBooks"]),S=Object(r.useMemo)((function(){return{username:"username"}}),[]);Object(r.useEffect)((function(){x(null===n||void 0===n?void 0:n.id)}),[n]);var D;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(h.a,{maxWidth:"sm",style:{marginTop:"32px"},children:Object(B.jsxs)(m.a,{children:[Object(B.jsx)("div",{style:{margin:"10px",fontSize:"30px",display:"flex",justifyContent:"center"},children:"Profile Page"}),Object(B.jsxs)("div",{style:{margin:"10px",display:"flex"},children:["Username:",Object(B.jsx)(O.a,{value:d.username||(null===(t=o[0])||void 0===t?void 0:t.username),onChange:(D=S.username,function(e){var t=Object(oe.a)({},D,e.target.value);j(t)}),style:{marginLeft:"16px"}})]}),Object(B.jsx)(b.a,{variant:"contained",color:"secondary",onClick:function(){return i.updateUser(v,d)},style:{margin:"10px"},children:"Save"})]})}),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("div",{children:[Object(B.jsx)("h2",{className:"title-container",children:"You have ".concat(A," favorite book").concat(1===A?"":"s")}),Object(B.jsxs)("div",{style:{margin:"10px",display:"flex",justifyContent:"center"},children:[Object(B.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return y((function(e){return Math.max(e-1,1)}))},style:{margin:"10px"},children:"Previous Page"}),Object(B.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){return y((function(e){return Math.min(e+1,Math.ceil(A/3))}))},style:{margin:"10px"},children:"Next Page"})]})]}),Object(B.jsx)("div",{className:"main-container",children:U.map((function(e){return Object(B.jsx)(m.a,{style:{margin:"16px",padding:"16px"},children:Object(B.jsx)(fe,{book:e,bookActions:I,isAdmin:a,userID:null===n||void 0===n?void 0:n.id},String(e._id))})}))})]})]})},me=n(102),Oe=n(188),xe=n(80),ge=n(187),ke=n(79),we=n(78),ye={green:Object(p.a)(Object(p.a)({},xe.a),{},{500:"#09804C",A400:"#B9EACD"}),purple:Object(p.a)(Object(p.a)({},ge.a),{},{500:"#6200EE",A400:"#9795F9"}),orange:ke.a,red:we.a},Ce={palette:{primary:ye.green,secondary:ye.green}},Ue=Object(me.a)(Ce);function Be(e){var t=e.children;return Object(B.jsx)(Oe.a,{theme:Ue,children:t})}function Ae(){return Object(B.jsx)(f.a,{className:"app-bar-title",component:"h1",variant:"h5",children:"IBDb: Internet Book Database"})}n(131);function Ie(){return Object(B.jsx)(Be,{children:Object(B.jsx)(S,{appId:U.a,children:Object(B.jsx)(Se,{})})})}function Se(){var e=D(),t=e.currentUser,n=e.logOut,c=a.a.useState(!1),o=Object(l.a)(c,2),i=o[0],p=o[1],v=a.a.useState("home"),h=Object(l.a)(v,2),m=h[0],O=h[1],x=a.a.useState("panel"),g=Object(l.a)(x,2),k=g[0],w=g[1],y={margin:"10px"},C="home",U="profile",A="admin",I="books";return Object(r.useEffect)((function(){var e="6283fd2ac3ac799e65415025";p((null===t||void 0===t?void 0:t.id)===e),(null===t||void 0===t?void 0:t.id)===e&&O(A)}),[t,A]),Object(B.jsxs)("div",{className:"App",children:[Object(B.jsx)(d.a,{position:"sticky",children:Object(B.jsxs)(j.a,{children:[Object(B.jsx)(Ae,{}),t&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(b.a,{variant:"contained",color:"secondary",onClick:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(i?A:C),i&&w("panel");case 2:case"end":return e.stop()}}),e)}))),style:y,children:Object(B.jsx)(f.a,{variant:"button",children:"Home"})}),!i&&Object(B.jsx)(b.a,{variant:"contained",color:"secondary",onClick:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(I);case 1:case"end":return e.stop()}}),e)}))),style:y,children:Object(B.jsx)(f.a,{variant:"button",children:"Books"})}),!i&&Object(B.jsx)(b.a,{variant:"contained",color:"secondary",onClick:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(U);case 1:case"end":return e.stop()}}),e)}))),style:y,children:Object(B.jsx)(f.a,{variant:"button",children:"Profile"})}),Object(B.jsx)(b.a,{variant:"contained",color:"secondary",onClick:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("error",e.t0);case 8:window.location.reload();case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),style:y,children:Object(B.jsx)(f.a,{variant:"button",children:"Log Out"})})]})]})}),t&&i&&m===A&&Object(B.jsx)(ve,{adminCurrentPage:k,setAdminCurrentPage:w}),!t&&!i&&m===C&&Object(B.jsx)(z,{}),t&&!i&&m===I&&Object(B.jsx)(pe,{}),!i&&t&&m===U&&Object(B.jsx)(he,{currentUser:t,isAdmin:i})]})}var De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,198)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)(Ie,{})}),document.getElementById("root")),De()},32:function(e){e.exports=JSON.parse('{"a":"awesomeapp-acjwu","b":"https://realm.mongodb.com","c":"mongodb-atlas"}')}},[[132,1,2]]]);
//# sourceMappingURL=main.03e17218.chunk.js.map